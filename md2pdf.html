<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MD2PDF - åŸç”Ÿæ’ç‰ˆæ ¸å¿ƒ</title>
    
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    <style>
        /* --- ç³»çµ±å±¤ç´šè¨­å®š --- */
        :root {
            --editor-bg: #1e1e1e;
            --editor-text: #d4d4d4;
            --preview-bg: #525659;
            --paper-width: 210mm;
            --paper-padding: 20mm;
        }

        * { box-sizing: border-box; }
        
        body { 
            margin: 0; height: 100vh; display: flex; flex-direction: column; 
            font-family: -apple-system, system-ui, sans-serif; 
            background: var(--preview-bg);
            overflow: hidden; /* é˜²æ­¢ä¸»è¦–çª—å‡ºç¾é›™é‡æ²è»¸ */
        }

        /* --- é ‚éƒ¨å°èˆªåˆ— (UI) --- */
        header {
            height: 50px; background: #2d2d2d; color: white; display: flex; 
            align-items: center; justify-content: space-between; padding: 0 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); z-index: 10;
        }
        
        .btn {
            background: #007acc; color: white; border: none; padding: 8px 16px; 
            border-radius: 4px; cursor: pointer; font-weight: bold; text-decoration: none;
            display: inline-flex; align-items: center; gap: 5px; transition: 0.2s;
        }
        .btn:hover { background: #0062a3; }

        /* --- ä¸»å·¥ä½œå€ --- */
        .workspace { display: flex; flex: 1; overflow: hidden; }

        /* å·¦å´ï¼šç·¨è¼¯å™¨ */
        .editor-pane { 
            width: 40%; display: flex; flex-direction: column; 
            border-right: 1px solid #444; background: var(--editor-bg);
        }
        
        textarea {
            flex: 1; width: 100%; background: transparent; color: var(--editor-text);
            border: none; padding: 20px; resize: none; outline: none;
            font-family: 'Consolas', monospace; font-size: 14px; line-height: 1.6;
        }

        /* å³å´ï¼šé è¦½å€ (æ¨¡æ“¬ PDF é–±è®€å™¨) */
        .preview-pane { 
            width: 60%; overflow-y: auto; display: flex; flex-direction: column; 
            align-items: center; padding: 30px; background: var(--preview-bg);
        }

        /* --- ğŸ“„ A4 ç´™å¼µæ¨¡æ“¬ (æ ¸å¿ƒ) --- */
        /* é€™æ˜¯ä½ åœ¨è¢å¹•ä¸Šçœ‹åˆ°çš„æ¨£å­ï¼Œæˆ‘å€‘ç›¡é‡è®“å®ƒé•·å¾—è·Ÿåˆ—å°å‡ºä¾†ä¸€æ¨£ */
        #paper {
            background: white;
            width: var(--paper-width);
            min-height: 297mm;
            padding: var(--paper-padding);
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
            color: black;
            font-size: 12pt; /* æ¨™æº–åˆ—å°å­—è™Ÿ */
            line-height: 1.6;
        }

        /* --- æ’ç‰ˆæ¨£å¼ (Markdown è½‰å‡ºçš„ HTML) --- */
        #paper h1 { border-bottom: 2px solid #333; padding-bottom: 10px; margin-top: 0; }
        #paper h2 { border-bottom: 1px solid #ccc; padding-bottom: 5px; margin-top: 2em; }
        #paper blockquote { border-left: 4px solid #ccc; padding-left: 15px; color: #666; margin: 1em 0; }
        #paper pre { background: #f5f5f5; padding: 10px; border-radius: 4px; overflow-x: auto; border: 1px solid #ddd; }
        #paper code { background: #f0f0f0; padding: 2px 4px; border-radius: 3px; font-family: 'Consolas', monospace; font-size: 0.9em; }
        
        /* è¡¨æ ¼æ¨£å¼ */
        #paper table { 
            width: 100%; border-collapse: collapse; margin: 1em 0; 
            border: 2px solid black; 
        }
        #paper th, #paper td { border: 1px solid #999; padding: 8px; text-align: left; }
        #paper th { background-color: #eee; -webkit-print-color-adjust: exact; } /* å¼·åˆ¶åˆ—å°èƒŒæ™¯è‰² */
        
        /* åœ–ç‰‡ */
        #paper img { max-width: 100%; height: auto; display: block; margin: 1em auto; }

        /* --- ğŸ–¨ï¸ åˆ—å°å°ˆç”¨ CSS (Media Print) --- */
        /* é€™æ‰æ˜¯è§£æ±ºåˆ†é å•é¡Œçš„é—œéµ */
        @media print {
            /* 1. éš±è—æ‰€æœ‰ UIï¼Œåªç•™ç´™å¼µ */
            body * { visibility: hidden; }
            #paper, #paper * { visibility: visible; }
            
            /* 2. é‡ç½®ä½ˆå±€ï¼ŒæŠŠç´™å¼µè²¼é½Šè¦–çª—å·¦ä¸Šè§’ */
            body { background: white; height: auto; overflow: visible; }
            .preview-pane { display: block; padding: 0; margin: 0; background: white; width: 100%; height: auto; overflow: visible; }
            
            #paper {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 0; /* è®“ç€è¦½å™¨æ§åˆ¶é‚Šè·ï¼Œæˆ–è€…ä½ åœ¨é€™è£¡è‡ªå·±ç•™ */
                box-shadow: none;
                min-height: 0;
            }

            /* 3. è¨­å®šç´™å¼µå¤§å° */
            @page {
                size: A4;
                margin: 20mm; /* é€™æ˜¯ PDF çš„ç‰©ç†é‚Šè· */
            }

            /* 4. ğŸ”¥ æ ¸å¿ƒï¼šé˜²æ­¢å…§å®¹åˆ‡æ–· ğŸ”¥ */
            p, h1, h2, h3, li, blockquote, pre, img, table, .math-display {
                page-break-inside: avoid;
                break-inside: avoid;
            }
            
            /* 5. è¡¨æ ¼è·¨é é‡è¤‡æ¨™é¡Œ */
            thead { display: table-header-group; }
            tr { page-break-inside: avoid; }
        }

        /* MathJax èª¿æ•´ */
        mjx-container { font-size: 110% !important; }
    </style>

    <script>
        window.MathJax = {
            tex: { 
                inlineMath: [['$', '$'], ['\\(', '\\)']], 
                displayMath: [['$$', '$$']] 
            },
            startup: { typeset: false }
        };
    </script>
</head>
<body>

    <header>
        <div style="font-weight: bold; font-size: 1.1rem;">MD2PDF åŸç”Ÿæ ¸å¿ƒç‰ˆ</div>
        <button class="btn" onclick="window.print()">
            ğŸ–¨ï¸ è½‰å­˜ç‚º PDF
        </button>
    </header>

    <div class="workspace">
        <div class="editor-pane">
            <textarea id="input" placeholder="è«‹åœ¨æ­¤è¼¸å…¥ Markdown..."># ç‰©ç†æœŸæœ«å ±å‘Š

## 1. å¯¦é©—ç›®çš„ (åˆ†é æ¸¬è©¦)
æ¸¬è©¦ç€è¦½å™¨åŸç”Ÿå¼•æ“æ˜¯å¦èƒ½æ­£ç¢ºè™•ç† **åˆ†é **ï¼Œä¸æœƒå°‡æ–‡å­—æˆ–å…¬å¼åˆ‡æ–·ã€‚

## 2. é¦¬å…‹å£«å¨æ–¹ç¨‹çµ„
è«‹æª¢æŸ¥ä¸‹æ–¹çš„å…¬å¼åœ¨ PDF ä¸­æ˜¯å¦æ¸…æ™°ï¼ˆå‘é‡å­—é«”ï¼‰ï¼Œä¸”æ²’æœ‰è·‘ç‰ˆã€‚

$$
\begin{aligned}
\nabla \cdot \mathbf{E} &= \frac{\rho}{\varepsilon_0} \\
\nabla \cdot \mathbf{B} &= 0 \\
\nabla \times \mathbf{E} &= -\frac{\partial \mathbf{B}}{\partial t} \\
\nabla \times \mathbf{B} &= \mu_0\mathbf{J} + \mu_0\varepsilon_0\frac{\partial \mathbf{E}}{\partial t}
\end{aligned}
$$

## 3. é•·è¡¨æ ¼æ¸¬è©¦ (è‡ªå‹•åˆ†é èˆ‡è¡¨é ­)
ç•¶è¡¨æ ¼è·¨è¶Šé é¢æ™‚ï¼Œè¡¨é ­æ‡‰è©²åœ¨ç¬¬äºŒé è‡ªå‹•é‡è¤‡å‡ºç¾ã€‚

| ID | åƒæ•¸åç¨± | æ•¸å€¼ | å‚™è¨» |
|:---|:---|:---|:---|
| 01 | Alpha | 0.05 | é¡¯è‘—æ€§æ°´æº– |
| 02 | Beta  | 0.80 | æª¢å®šåŠ› |
| 03 | Gamma | 1.25 | ä¿®æ­£ä¿‚æ•¸ |
| 04 | Delta | 3.14 | åœ“å‘¨ç‡è¿‘ä¼¼ |
| 05 | Epsilon| 1e-5| èª¤å·®å®¹å¿åº¦ |
| 06 | Zeta  | 0.99 | é˜»å°¼æ¯” |
| 07 | Eta   | 0.33 | æ•ˆç‡ä¿‚æ•¸ |
| 08 | Theta | 45.0 | è§’åº¦åƒæ•¸ |
| 09 | Iota  | 1.00 | è™›æ•¸å–®ä½ |
| 10 | Kappa | 2.50 | æ›²ç‡ |
| 11 | Lambda| 550  | æ³¢é•· (nm) |
| 12 | Mu    | 0.01 | æ‘©æ“¦ä¿‚æ•¸ |

## 4. çµè«–
ä½¿ç”¨ `window.print()` é…åˆ `@media print` æ¨£å¼ï¼Œæ˜¯å‰ç«¯ç”Ÿæˆé«˜å“è³ª PDF çš„å”¯ä¸€æ­£è§£ã€‚
            </textarea>
        </div>

        <div class="preview-pane">
            <div id="paper"></div>
        </div>
    </div>

    <script>
        const input = document.getElementById('input');
        const paper = document.getElementById('paper');

        // æ¸²æŸ“å‡½æ•¸
        function render() {
            const md = input.value;
            
            // 1. Markdown -> HTML
            let html = marked.parse(md);
            
            // 2. æ›´æ–° DOM
            paper.innerHTML = html;

            // 3. MathJax æ¸²æŸ“ (ç•°æ­¥)
            if (window.MathJax && window.MathJax.typesetPromise) {
                window.MathJax.typesetPromise([paper]).catch(err => console.error(err));
            }
        }

        // ç›£è½è¼¸å…¥ (é˜²æŠ–å‹•)
        let timer;
        input.addEventListener('input', () => {
            clearTimeout(timer);
            timer = setTimeout(render, 300);
        });

        // åˆå§‹åŒ–
        render();
    </script>
</body>
</html>
